# AI Brain è‡ªåŠ¨åŒ–æµ‹è¯•

æœ¬ç›®å½•åŒ…å« AI Brain é¡¹ç›®çš„ç«¯åˆ°ç«¯ (E2E) è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä½¿ç”¨ Playwright æµ‹è¯•æ¡†æ¶ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…æµ‹è¯•ä¾èµ–
```bash
npm run test:setup
```

### 2. è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
npm run test
```

### 3. äº¤äº’å¼UIæµ‹è¯•
```bash
npm run test:ui
```

### 4. è°ƒè¯•æ¨¡å¼
```bash
npm run test:debug
```

## ğŸ“ æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ auth.setup.ts              # è®¤è¯è®¾ç½®
â”œâ”€â”€ e2e/                       # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ homepage.spec.ts       # é¦–é¡µå’ŒåŸºç¡€å¯¼èˆª
â”‚   â”œâ”€â”€ authentication.spec.ts # ç”¨æˆ·è®¤è¯æµç¨‹
â”‚   â”œâ”€â”€ chat-interface.spec.ts # AIèŠå¤©ç•Œé¢
â”‚   â””â”€â”€ workspace-management.spec.ts # å·¥ä½œç©ºé—´ç®¡ç†
â””â”€â”€ README.md                  # æµ‹è¯•æ–‡æ¡£
```

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹è¦†ç›–

### 1. é¦–é¡µå’ŒåŸºç¡€å¯¼èˆª (`homepage.spec.ts`)
- âœ… é¦–é¡µæ­£å¸¸åŠ è½½
- âœ… è¯­è¨€åˆ‡æ¢åŠŸèƒ½
- âœ… æ·±è‰²æ¨¡å¼åˆ‡æ¢
- âœ… å“åº”å¼è®¾è®¡æµ‹è¯•

### 2. ç”¨æˆ·è®¤è¯ (`authentication.spec.ts`)
- âœ… ç”¨æˆ·æ³¨å†Œæµç¨‹
- âœ… æ¼”ç¤ºè´¦æˆ·ç™»å½•
- âœ… é”™è¯¯å‡­æ®å¤„ç†
- âœ… ç”¨æˆ·æ³¨é”€åŠŸèƒ½

### 3. AIèŠå¤©ç•Œé¢ (`chat-interface.spec.ts`)
- âœ… èŠå¤©ç•Œé¢åŸºæœ¬å…ƒç´ 
- âœ… ä¾§è¾¹æ å±•å¼€/æŠ˜å 
- âœ… æ•°æ®æºçŠ¶æ€æŒ‡ç¤ºå™¨
- âœ… å¿«é€Ÿæç¤ºè¯å¡ç‰‡
- âœ… æ¶ˆæ¯å‘é€å’ŒAIå›å¤
- âœ… æ—¶é—´æˆ³æ˜¾ç¤º
- âœ… å“åº”å¼è®¾è®¡

### 4. å·¥ä½œç©ºé—´ç®¡ç† (`workspace-management.spec.ts`)
- âœ… å·¥ä½œç©ºé—´åˆ—è¡¨æŸ¥çœ‹
- âœ… åˆ›å»ºæ–°å·¥ä½œç©ºé—´
- âœ… è¿›å…¥ç°æœ‰å·¥ä½œç©ºé—´
- âœ… å·¥ä½œç©ºé—´åˆ‡æ¢
- âœ… å·¥ä½œç©ºé—´è®¾ç½®
- âœ… æƒé™ç³»ç»ŸéªŒè¯

## ğŸ”§ æµ‹è¯•é…ç½®

### æ¼”ç¤ºè´¦æˆ·
æµ‹è¯•ä½¿ç”¨ä»¥ä¸‹æ¼”ç¤ºè´¦æˆ·ï¼š
- **é‚®ç®±**: demo@aibrain.com
- **å¯†ç **: demo123
- **å·¥ä½œç©ºé—´ID**: e7c5aa1e-de00-4327-81dd-cfeba3030081

### æµè§ˆå™¨æ”¯æŒ
- âœ… Chromium (Chrome)
- âœ… Firefox
- âœ… WebKit (Safari)
- âœ… Mobile Chrome
- âœ… Mobile Safari

### æµ‹è¯•ç¯å¢ƒ
- **åŸºç¡€URL**: http://localhost:3002
- **å¼€å‘æœåŠ¡å™¨**: è‡ªåŠ¨å¯åŠ¨ (npm run dev)
- **è¶…æ—¶è®¾ç½®**: 2åˆ†é’ŸæœåŠ¡å™¨å¯åŠ¨

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

### ç”ŸæˆHTMLæŠ¥å‘Š
```bash
npm run test:report
```

### æŸ¥çœ‹æµ‹è¯•ç»“æœ
æµ‹è¯•ç»“æœä¿å­˜åœ¨ï¼š
- `test-results/` - æµ‹è¯•å¤±è´¥æˆªå›¾å’Œè§†é¢‘
- `playwright-report/` - HTMLæµ‹è¯•æŠ¥å‘Š

## ğŸ›  å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æµ‹è¯•
1. åœ¨ `tests/e2e/` ç›®å½•åˆ›å»ºæ–°çš„ `.spec.ts` æ–‡ä»¶
2. ä½¿ç”¨è®¤è¯çŠ¶æ€ï¼š`test.use({ storageState: 'playwright/.auth/user.json' })`
3. ç¼–å†™æµ‹è¯•ç”¨ä¾‹å¹¶è¿è¡ŒéªŒè¯

### æµ‹è¯•æœ€ä½³å®è·µ
1. **ä½¿ç”¨è¯­ä¹‰åŒ–é€‰æ‹©å™¨**: ä¼˜å…ˆä½¿ç”¨ `data-testid` å±æ€§
2. **ç­‰å¾…å…ƒç´ å¯è§**: ä½¿ç”¨ `await expect().toBeVisible()`
3. **å¤„ç†å¼‚æ­¥æ“ä½œ**: ä½¿ç”¨é€‚å½“çš„ç­‰å¾…å’Œè¶…æ—¶
4. **ç§»åŠ¨ç«¯æµ‹è¯•**: éªŒè¯å“åº”å¼è®¾è®¡
5. **é”™è¯¯å¤„ç†**: æµ‹è¯•å¼‚å¸¸æƒ…å†µå’Œè¾¹ç•Œæ¡ä»¶

### è°ƒè¯•æµ‹è¯•å¤±è´¥
```bash
# ä»¥å¯è§†åŒ–æ¨¡å¼è¿è¡Œå•ä¸ªæµ‹è¯•
npx playwright test tests/e2e/chat-interface.spec.ts --headed --debug

# æŸ¥çœ‹æµ‹è¯•æ‰§è¡Œè½¨è¿¹
npx playwright show-trace test-results/[test-name]/trace.zip
```

## ğŸ” é€‰æ‹©å™¨ç­–ç•¥

æµ‹è¯•ä½¿ç”¨å¤šé‡é€‰æ‹©å™¨ç­–ç•¥ä»¥æé«˜ç¨³å®šæ€§ï¼š

```typescript
// ç¤ºä¾‹ï¼šå¤šç§é€‰æ‹©å™¨å¤‡é€‰æ–¹æ¡ˆ
const messageInput = page.locator('input[placeholder*="æ¶ˆæ¯"]')
  .or(page.locator('textarea[placeholder*="æ¶ˆæ¯"]'))
  .or(page.locator('input[placeholder*="message"]'))
  .or(page.locator('textarea[placeholder*="message"]'))
```

## ğŸ“ˆ æŒç»­é›†æˆ

æµ‹è¯•é…ç½®æ”¯æŒ CI/CD ç¯å¢ƒï¼š
- âœ… å¤±è´¥é‡è¯•æœºåˆ¶
- âœ… å¹¶è¡Œæµ‹è¯•æ‰§è¡Œ
- âœ… æˆªå›¾å’Œè§†é¢‘è®°å½•
- âœ… HTMLæŠ¥å‘Šç”Ÿæˆ

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **æœåŠ¡å™¨ä¾èµ–**: æµ‹è¯•éœ€è¦å¼€å‘æœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£ 3002
2. **æ•°æ®åº“çŠ¶æ€**: ç¡®ä¿ Supabase æ•°æ®åº“è¿æ¥æ­£å¸¸
3. **è®¤è¯çŠ¶æ€**: éƒ¨åˆ†æµ‹è¯•éœ€è¦ç”¨æˆ·ç™»å½•çŠ¶æ€
4. **ç½‘ç»œå»¶è¿Ÿ**: åœ¨æ…¢ç½‘ç»œç¯å¢ƒä¸‹å¯èƒ½éœ€è¦è°ƒæ•´è¶…æ—¶è®¾ç½®

## ğŸ“ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æœåŠ¡å™¨å¯åŠ¨å¤±è´¥**: æ£€æŸ¥ç«¯å£ 3002 æ˜¯å¦è¢«å ç”¨
2. **è®¤è¯å¤±è´¥**: éªŒè¯æ¼”ç¤ºè´¦æˆ·æ˜¯å¦å¯ç”¨
3. **å…ƒç´ æœªæ‰¾åˆ°**: æ£€æŸ¥é¡µé¢æ˜¯å¦å®Œå…¨åŠ è½½
4. **è¶…æ—¶é”™è¯¯**: å¢åŠ ç›¸åº”æ“ä½œçš„ç­‰å¾…æ—¶é—´

### è·å–å¸®åŠ©
- æŸ¥çœ‹ Playwright å®˜æ–¹æ–‡æ¡£: https://playwright.dev
- æŸ¥çœ‹é¡¹ç›® CLAUDE.md äº†è§£æ¶æ„è¯¦æƒ…
- è¿è¡Œ `npm run test:debug` è¿›è¡Œäº¤äº’å¼è°ƒè¯•